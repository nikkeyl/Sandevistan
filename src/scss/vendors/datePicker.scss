@use "sass:math";

@import "@scss/abstracts/functions";
@import "@scss/abstracts/mixins";
@import "@scss/base/colors";

/* Calendar (Datepicker plugin) */

$width: 15.625em;
$radius: $width * 0.016891;
$transition: 0.3s;
$font-size: $width * 0.056;
$lightblue: #add8e6;

.qs-datepicker-container {
	position: absolute;
	z-index: 9001;
	display: flex;
	flex-direction: column;
	overflow: hidden;
	border: rem(1) solid var(--color-gray);
	border-radius: $radius;
	width: $width;
	box-shadow: 0 ($width * 0.08) ($width * 0.08) ($width * -0.06)
		rgba(--color-dark, 0.3);
	font-family: sans-serif;
	font-size: rem(16);
	color: var(--color-dark);
	background-color: var(--color-light);
	user-select: none;

	* {
		box-sizing: border-box;
	}
}

.qs-centered {
	position: fixed;
	inset: 50%;
	transform: translate(-50%, -50%);
}

.qs-hidden {
	display: none;
}

.qs-overlay {
	@include width-height(100%, 100%);

	position: absolute;
	inset: 0;
	z-index: 1;
	display: flex;
	flex-direction: column;
	padding: em(8);
	color: var(--color-light);
	background-color: rgba(--color-dark, 0.75);
	opacity: 1;
	transition: opacity $transition;

	.qs-overlay-year {
		display: block;
		margin: 0 auto;
		border: none;
		border-bottom: rem(1) solid var(--color-light);
		border-radius: 0;
		padding: em(8) 0;
		width: 80%;
		font-size: $font-size;
		text-align: center;
		color: var(--color-light);
		background-color: transparent;

		&::-webkit-inner-spin-button {
			-webkit-appearance: none;
		}
	}

	.qs-close {
		position: absolute;
		inset: 0;
		padding: em(8);
		cursor: pointer;
	}

	.qs-submit {
		margin: 0 auto auto;
		border: rem(1) solid var(--color-light);
		border-radius: $radius;
		padding: em(8);
		background-color: rgba(#808080, 0.4);
		cursor: pointer;

		&.qs-disabled {
			border-color: var(--color-gray);
			color: var(--color-gray);
			cursor: not-allowed;
		}
	}

	.qs-overlay-month-container {
		display: flex;
		flex-grow: 1;
		flex-wrap: wrap;
	}

	.qs-overlay-month {
		display: flex;
		align-items: center;
		justify-content: center;
		width: #{"calc(100% / 3)"};
		opacity: 0.5;
		transition: opacity math.div($transition, 2);
		cursor: pointer;

		&.active,
		&:hover {
			opacity: 1;
		}
	}

	&.qs-hidden {
		z-index: -1;
		opacity: 0;
	}
}

.qs-controls {
	display: flex;
	flex-grow: 1;
	flex-shrink: 0;
	align-items: center;
	justify-content: space-between;
	width: 100%;
	background-color: #d3d3d3;
	filter: blur(0);
	transition: filter $transition;

	&.qs-blur {
		filter: blur(rem(5));
	}
}

.qs-arrow {
	@include width-height(math.div($width, 10), math.div($width, 10));

	position: relative;
	border-radius: $radius;
	transition: background-color 0.15s;
	cursor: pointer;

	&::after {
		@include pseudo;

		top: 50%;
		border: math.div($width, 40) solid transparent;
		transition: border 0.2s;
	}

	&.qs-left::after {
		right: 50%;
		border-right-color: var(--color-gray);
		transform: translate(25%, -50%);
	}

	&.qs-right::after {
		left: 50%;
		border-left-color: var(--color-gray);
		transform: translate(-25%, -50%);
	}

	@include media-hover {
		background-color: rgba(--color-dark, 0.1);

		&.qs-left::after {
			border-right-color: var(--color-dark);
		}

		&.qs-right::after {
			border-left-color: var(--color-dark);
		}
	}
}

.qs-month-year {
	border-bottom: rem(1) solid transparent;
	font-weight: 700;
	transition: border 0.2s;

	&:focus,
	&:active:focus {
		outline: none;
	}

	&:not(.qs-disabled-year-overlay) {
		cursor: pointer;

		@include media-hover {
			border-bottom: rem(1) solid var(--color-gray);
		}
	}
}

.qs-month {
	padding-right: 0.5ex;
}

.qs-year {
	padding-left: 0.5ex;
}

.qs-squares {
	display: flex;
	flex-wrap: wrap;
	padding: $width * 0.02;
	filter: blur(0);
	transition: filter $transition;

	&.qs-blur {
		filter: blur(rem(5));
	}
}

.qs-square {
	@include width-height(#{"calc(100% / 7)"}, math.div($width, 10));

	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: $radius;
	transition: background-color 0.1s;
	cursor: pointer;

	&:not(.qs-empty),
	&:not(.qs-disabled),
	&:not(.qs-day),
	&:not(.qs-active) {
		@include media-hover {
			background-color: var(--color-dark-gray);
		}
	}
}

.qs-current {
	font-weight: 700;
	text-decoration: underline;
}

/*
  3 possibilities:
    1. Single, active date.
    2. Daterange start selection.
    3. Daterange end selection.
*/
.qs-active,
.qs-range-start,
.qs-range-end {
	background-color: $lightblue;
}

.qs-range-start {
	&:not(.qs-range-6) {
		border-top-right-radius: 0;
		border-bottom-right-radius: 0;
	}
}

.qs-range-middle {
	background-color: lighten($lightblue, 10%);

	&.qs-range-0 {
		border-top-right-radius: 0;
		border-bottom-right-radius: 0;
	}

	&.qs-range-6 {
		border-top-left-radius: 0;
		border-bottom-left-radius: 0;
	}

	&:not(.qs-range-0),
	&:not(.qs-range-6) {
		border-radius: 0;
	}
}

.qs-range-end {
	&:not(.qs-range-0) {
		border-top-left-radius: 0;
		border-bottom-left-radius: 0;
	}
}

.qs-disabled,
.qs-outside-current-month {
	opacity: 0.2;
}

.qs-disabled {
	cursor: not-allowed;
}

.qs-empty {
	cursor: default;
}

.qs-day {
	font-weight: 700;
	color: var(--color-gray);
	cursor: default;
}

.qs-event {
	position: relative;

	&::after {
		@include pseudo;
		@include width-height($width * 0.03, $width * 0.03);

		right: 0;
		bottom: 0;
		border-radius: 50%;
		background-color: var(--color-gray);
	}
}
